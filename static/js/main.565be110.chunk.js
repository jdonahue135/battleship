(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{25:function(e,t,a){e.exports=a(35)},3:function(e,t,a){"use strict";a.r(t),a.d(t,"populateGameboard",(function(){return r})),a.d(t,"sinkAllShips",(function(){return i})),a.d(t,"getComputerPlay",(function(){return s})),a.d(t,"formatShipName",(function(){return c})),a.d(t,"coordinatesToIndex",(function(){return n})),a.d(t,"indexToCoordinates",(function(){return o}));var r=function(e){for(var t=e.getShips(),a=0;a<t.length;a++){var r=t[a].getName(),i=Math.random()<.5?"horizontal":"vertical",n=Math.floor(100*Math.random());!1===e.placeShip(r,i,n)&&a--}},i=function(e){e.receiveAttack(0),e.receiveAttack(1),e.receiveAttack(10),e.receiveAttack(11),e.receiveAttack(12),e.receiveAttack(20),e.receiveAttack(21),e.receiveAttack(22),e.receiveAttack(30),e.receiveAttack(31),e.receiveAttack(32),e.receiveAttack(33),e.receiveAttack(40),e.receiveAttack(41),e.receiveAttack(42),e.receiveAttack(43),e.receiveAttack(44)},n=function(e){return 10*(e.charAt(0).toUpperCase().charCodeAt(0)-65)+Number(e.slice(1))-1},o=function(e){return String.fromCharCode(Math.floor(e/10)+65)+(e%10+1)},s=function(){return Math.floor(100*Math.random())},c=function(e){return e.replace(" ","-").toLowerCase()}},30:function(e,t,a){},32:function(e,t,a){var r=a(3),i=r.indexToCoordinates,n=r.coordinatesToIndex,o=a(33);e.exports=function(){for(var e=[],t=[o("Carrier"),o("Battleship"),o("Destroyer"),o("Submarine"),o("Patrol Boat")],a=0,r=65;r<75;r++)for(var s=1;s<11;s++){var c={index:a,coordinates:String.fromCharCode(r)+s,hitStatus:!1,shipName:null,shipIndex:null};e.push(c),a++}var l=function(t){return e.find((function(e){return e.index===t}))};return{receiveAttack:function(a){var r=e.find((function(e){return e.index===Number(a)}));if(!0===r.hitStatus)return!1;if(r.hitStatus=!0,null!==r.shipIndex){var i=t.find((function(e){return r.shipName===e.getName()}));i.hit(r.shipIndex),!0===i.isSunk()&&console.log("You sunk my "+i.getName())}return r},placeShip:function(a,r,o){for(var s,c=t.find((function(e){return e.getName()===a})),h=[],u=o,p=0;p<c.getLength();p++)h.push(i(u)),"horizontal"===r?u++:u+=10;for(var d=0;d<h.length;d++){var m=l(n(h[d]));if(!m||m.shipName)return s=!0,!1}"horizontal"===r?s=h.find((function(e){return e[0]!==i(o)[0]})):s=!(10-(i(o)[0].charCodeAt(0)-65)-c.getLength()>0);if(s)return!1;for(var f="horizontal"===r?1:10,v=function(t){var r=Number(o)+t*f;r>99&&(r-=100);var i=e.find((function(e){return e.index===r}));i.shipName=a,i.shipIndex=t,c.place()},g=0;g<c.getLength();g++)v(g)},getShips:function(){return t},areAllSunk:function(){for(var e=0;e<t.length;e++)if(!1===t[e].isSunk())return!1;return!0},getGridItem:l,getGrid:function(){return e},allShipsOnBoard:function(){for(var e=0;e<t.length;e++)if(!1===t[e].getPlacedStatus())return!1;return!0}}}},33:function(e,t){e.exports=function(e){var t,a=[],r=!1;switch(e){case"Carrier":t=5;break;case"Battleship":t=4;break;case"Destroyer":case"Submarine":t=3;break;case"Patrol Boat":t=2}for(var i=0;i<t;i++){var n={index:i,hitStatus:!1};a.push(n)}return{getName:function(){return e},getLength:function(){return t},getShip:function(){return a},hit:function(e){a[e].hitStatus=!0},isSunk:function(){var e=0;return a.forEach((function(t){!0===t.hitStatus&&e++})),e===t},getPlacedStatus:function(){return r},place:function(){r=!0}}}},34:function(e,t){e.exports=function(e){return{getName:function(){return e},attack:function(e,t){return e.receiveAttack(t)}}}},35:function(e,t,a){"use strict";a.r(t);var r=a(0),i=a.n(r),n=a(17),o=a.n(n),s=(a(30),a(18)),c=a(19),l=a(23),h=a(22),u=a(3),p=a(9),d="ship",m=a(38),f=function(e){var t=e.onClick?e.onClick:null,a="gridspace";t||(a=e.gridSpace.shipName?"gridspace has-ship":"gridspace");var r=Object(m.a)({accept:d,drop:function(){return e.onDrop(e.gridSpace.coordinates)},collect:function(e){return{isOver:!!e.isOver()}}}),n=Object(p.a)(r,2)[1];return i.a.createElement("div",{ref:e.onClick?null:n,key:e.gridSpace.coordinates,className:a,onClick:t,onDrop:e.onDrop,id:e.gridSpace.index})},v=function(e){var t=e.onClick?"computer-container":"player-container",a=e.board.map((function(t){return i.a.createElement(f,{key:t.coordinates,gridSpace:t,onClick:e.onClick,onDrop:e.onDrop})}));return i.a.createElement("div",{id:t,className:"gameboard-container"},a)},g=a(39),y=function(e){for(var t=Object(g.a)({item:{type:d,shipName:e.ship.getName()},collect:function(e){return{isDragging:!!e.isDragging()}}}),a=Object(p.a)(t,2),r=a[0].isDragging,n=a[1],o=[],s=0;s<e.ship.getLength();s++)o.push(s);var c=o.map((function(t){return i.a.createElement("div",{id:e.ship.getName()+t,key:e.ship.getName()+t,className:"ship-space"})})),l=Object(u.formatShipName)(e.ship.getName())+" ship";return l="horizontal"===e.orientation?l:l+" vertical-"+Object(u.formatShipName)(e.ship.getName()),i.a.createElement("div",{className:"ship-container"},i.a.createElement("div",{key:e.ship.getName(),onMouseOver:e.onClick,className:l,ref:n,style:{opacity:r?.5:1}},c))},k=a(37),b=a(21),S=a(32),N=a(34),G=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).state={playerGameboard:S(),computerGameboard:S(),activePlayer:null,gameStatus:!1,shipCoordinates:null,shipOrientation:"horizontal",hoverSpaces:null,shipIndex:null},r.players=[N("Player"),N("Computer")],r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.state.gameStatus&&this.state.activePlayer===this.players[1]&&this.playTurn(Object(u.getComputerPlay)())}},{key:"setUpGame",value:function(){var e=this.state.playerGameboard,t=this.state.computerGameboard;Object(u.populateGameboard)(t),this.setState({playerGameboard:e,computerGameboard:t,gameStatus:!0,activePlayer:this.players[0]})}},{key:"playTurn",value:function(e){var t;t=this.state.activePlayer!==this.players[0]?this.state.playerGameboard:this.state.computerGameboard;var a=this.state.activePlayer.attack(t,e);if(!1===a||void 0===a){if(this.state.activePlayer===this.players[0])return;var r=e;return r<99?r++:r=0,void this.playTurn(r)}null!==a.shipIndex?this.addClass(a.index,"hit"):this.addClass(a.index,"miss"),this.checkForWinner()||(this.state.activePlayer===this.players[0]?this.setState({activePlayer:this.players[1]}):this.setState({activePlayer:this.players[0]}))}},{key:"checkForWinner",value:function(){if(this.state.activePlayer===this.players[0]?this.state.computerGameboard.areAllSunk():this.state.playerGameboard.areAllSunk())return console.log(this.state.activePlayer.getName()+" won!"),this.setState({gameStatus:!1}),!0}},{key:"handleAttack",value:function(e){this.state.gameStatus&&this.state.activePlayer===this.players[0]&&this.playTurn(e.target.id)}},{key:"addClass",value:function(e,t){var a=this.state.activePlayer===this.players[0]?"#computer-container":"#player-container";document.querySelector(a).childNodes.item(e).classList.add(t)}},{key:"handleFlip",value:function(){console.log("Flip, flip, flipadelphia");var e="horizontal"===this.state.shipOrientation?"vertical":"horizontal";this.setState({shipOrientation:e})}},{key:"handleDrop",value:function(e){if("string"===typeof e){var t=this.state.shipIndex.slice(0,-1),a=this.state.shipIndex[this.state.shipIndex.length-1],r="horizontal"===this.state.shipOrientation?Object(u.coordinatesToIndex)(e)-a:Object(u.coordinatesToIndex)(e)-10*a,i=this.state.playerGameboard;i.placeShip(t,this.state.shipOrientation,r),this.setState({playerGameboard:i})}}},{key:"handleDrag",value:function(e){this.setState({shipIndex:e.target.id})}},{key:"renderShip",value:function(e){if(!e.getPlacedStatus())return i.a.createElement(y,{onClick:this.handleDrag.bind(this),ship:e,orientation:this.state.shipOrientation})}},{key:"resetGame",value:function(){window.location.reload(!1)}},{key:"render",value:function(){var e,t=this.state.gameStatus?"Reset":"Play Game",a="";this.state.playerGameboard.allShipsOnBoard()&&(e=this.state.gameStatus?this.resetGame.bind(this):this.setUpGame.bind(this),a="hidden");var r="ships-container";return r="horizontal"===this.state.shipOrientation?r:r+" vertical",i.a.createElement(k.a,{backend:b.a},i.a.createElement("div",{className:"game-container"},i.a.createElement("h1",null,"Battleship"),i.a.createElement("button",{onClick:e},t),i.a.createElement("div",{className:"player-label-container"},i.a.createElement("h2",null,"Player"),i.a.createElement("h2",null,"Enemy")),i.a.createElement("h3",{className:a},"Your ships"),i.a.createElement("div",{className:r},this.renderShip(this.state.playerGameboard.getShips()[0]),this.renderShip(this.state.playerGameboard.getShips()[1]),this.renderShip(this.state.playerGameboard.getShips()[2]),this.renderShip(this.state.playerGameboard.getShips()[3]),this.renderShip(this.state.playerGameboard.getShips()[4])),i.a.createElement("div",{className:"board-container"},i.a.createElement(v,{key:"playerGameboard",board:this.state.playerGameboard.getGrid(),onDrop:this.handleDrop.bind(this)}),i.a.createElement(v,{key:"computerGameboard",board:this.state.computerGameboard.getGrid(),onClick:this.handleAttack.bind(this)})),i.a.createElement("button",{className:"flip-button "+a,onClick:this.handleFlip.bind(this)},"Flip")))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.565be110.chunk.js.map